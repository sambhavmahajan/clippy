<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
<!-- Navigation Bar -->
<nav class="bg-indigo-600 shadow-lg">
  <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center">
      <h1 class="text-white text-2xl font-bold" th:text="'Welcome ' + ${username}"></h1>
      <form method="post" action="/logout" class="inline">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button
                type="submit"
                class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200"
        >
          Logout
        </button>
      </form>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">

  <!-- Alert Messages -->
  <div class="mb-8 space-y-4">
    <!-- Success Alert -->
    <div th:if="${copiedContent}" class="p-4 bg-green-50 border border-green-200 rounded-lg">
      <p th:text="${copiedContent}" class="text-green-700 text-sm font-medium">
        Copied Content
      </p>
    </div>

    <!-- Error Alert -->
    <div th:if="${error}" class="p-4 bg-red-50 border border-red-200 rounded-lg">
      <p th:text="${error}" class="text-red-700 text-sm font-medium">
        Error
      </p>
    </div>
  </div>

  <!-- Forms Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">

    <!-- Fetch Clipboard Card -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold text-gray-800 mb-4">Fetch Clipboard</h2>
      <form th:action="@{/dashboard}" method="POST" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Clipboard Code</label>
          <input
                  type="text"
                  name="uuid"
                  placeholder="Enter clipboard code"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
          />
        </div>
        <button
                type="submit"
                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200"
        >
          Fetch
        </button>
      </form>
    </div>

    <!-- Create Clipboard Card -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold text-gray-800 mb-4">Create Clipboard</h2>
      <form th:action="@{/dashboard}" method="post" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
          <input
                  type="text"
                  name="content"
                  placeholder="Enter your content"
                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
                  required
          />
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button
                type="submit"
                class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200"
        >
          Create
        </button>
      </form>
    </div>
  </div>

  <!-- Past Created Clipboards Section -->
  <div class="bg-white rounded-lg shadow p-6 mb-8">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Past Created Clipboards</h2>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
        <tr class="bg-gray-100 border-b border-gray-300">
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Code</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Content</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Created On</th>
        </tr>
        </thead>
        <tbody>
        <th:block th:each="clip, iterStat : ${clips}">
          <tr th:class="${iterStat.odd} ? 'bg-white' : 'bg-gray-50'" class="border-b border-gray-200 hover:bg-indigo-50 transition">
            <td class="px-6 py-4 text-sm font-mono text-indigo-600" th:text="${clip.getUuid()}"></td>
            <td class="px-6 py-4 text-sm text-gray-700 truncate" th:text="${clip.getContent()}"></td>
            <td class="px-6 py-4 text-sm text-gray-600" th:text="${clip.getTimestamp()}"></td>
          </tr>
        </th:block>
        <tr th:if="${#lists.isEmpty(clips)}" class="text-center">
          <td colspan="3" class="px-6 py-8 text-gray-500 italic">No clipboards created yet</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- History Section -->
  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">History</h2>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
        <tr class="bg-gray-100 border-b border-gray-300">
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Clipboard</th>
        </tr>
        </thead>
        <tbody>
        <th:block th:each="h, iterStat : ${history}">
          <tr th:class="${iterStat.odd} ? 'bg-white' : 'bg-gray-50'" class="border-b border-gray-200 hover:bg-indigo-50 transition">
            <td class="px-6 py-4 text-sm font-mono text-gray-700" th:text="${h}"></td>
          </tr>
        </th:block>
        <tr th:if="${#lists.isEmpty(history)}" class="text-center">
          <td class="px-6 py-8 text-gray-500 italic">No history available</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</body>
</html>